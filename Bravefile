image:
  dist: ubuntu
  name: ubuntu/bionic/amd64
  location: images

packages:
  manager: apt
  system:
   - git
   - cmake
   - bash
   - curl
   - gcc
   - g++
   - python3
   - python3-dev
   - python3-pip 
   - libopenblas-dev
   - tmux

copy:
  - source: requirements.txt
    target: /root/

run:
  - command: curl
    args:
      - -fLo
      - /root/.vim/autoload/plug.vim
      - --create-dirs
      - https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

  - command: git
    args:
      - clone
      - https://github.com/beringresearch/dotfiles

  - command: cp
    args:
      - /root/dotfiles/.vimrc
      - /root/dotfiles/.tmux.conf
      - /root/
 
  - command: pip3
    args:
      - --no-cache-dir
      - install
      - --upgrade
      - pip
      - setuptools
      - virtualenv
      - tqdl
      - sentencepiece
      - ipython

  - command: pip3
    args:
      - install
      - -r
      - requirements.txt

  - command: pip3
    args:
      - install
      - finetune[tf]

  - command: python3
    args:
      - -m
      - spacy
      - download
      - en

service:
  name: finetune
  resources:
   ram: 32GB
   cpu: 12
  version: 1.0 
